let w=$("#canvas"),d=w.get(0).getContext("2d"),s=$("#modal"),h=document.getElementById("canvas"),i;$("#fileInput").on("change",function(){if(this.files&&this.files[0]&&this.files[0].type.match(/^image\//)){let e=new FileReader;e.onload=function(o){let t=new Image;t.onload=function(){d.canvas.height=t.height,d.canvas.width=t.width,d.drawImage(t,0,0)},t.src=o.target.result},e.readAsDataURL(this.files[0])}});$("body").on("change","#fileInput",function(e){let o=e.target.files,t=function(n){h.src=n,s.modal("show")},a,r;o&&o.length>0&&(r=o[0],URL?t(URL.createObjectURL(r)):FileReader&&(a=new FileReader,a.onload=function(n){t(a.result)},a.readAsDataURL(r)))});s.on("shown.bs.modal",function(){i=new Cropper(h,{aspectRatio:16/9,viewMode:3,preview:".preview",responsive:!0})}).on("hidden.bs.modal",function(){i.destroy(),i=null});$("#close").on("click",function(){s.modal("hide")});$("#fechar").on("click",function(){s.modal("hide")});$("#crop").click(function(){let e=$("#resultado"),o=e.get(0).getContext("2d");const t=i.getData();let a=t.x,r=t.y,n=t.width,c=t.height,u=document.getElementById("resultado");u.width=n,u.height=c,o.drawImage(document.getElementById("canvas"),a,r,n,c,0,0,n,c),i.getCroppedCanvas().toBlob(function(f){URL.createObjectURL(f);let l=new FileReader;l.readAsDataURL(f),l.onloadend=function(){let g=l.result;$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",dataType:"json",url:"cadastrar_imagem",data:{_token:$('meta[name="_token"]').attr("content"),image:g},success:function(p){s.modal("hide");const v=document.querySelector("#nome_imgcortada");v.value=p.nome_imagem}})}})});ClassicEditor.create(document.querySelector("#editor_sobre")).catch(e=>{console.error(e)});ClassicEditor.create(document.querySelector("#editor_ginasio")).catch(e=>{console.error(e)});ClassicEditor.create(document.querySelector("#editor_infos")).catch(e=>{console.error(e)});ClassicEditor.create(document.querySelector("#editor_entrada")).catch(e=>{console.error(e)});function m(e){let o=document.getElementById("snackbar");o.innerHTML=`<p>${e}</p>`,o.className="show",setTimeout(function(){o.className=o.className.replace("show","")},5e3)}$("#formulario").submit(function(e){const o=$("#editor_sobre").val(),t=$(o).text(),a=$("#editor_ginasio").val(),r=$(a).text(),n=$("#editor_infos").val(),c=$(n).text();$.trim(t)==""?(m("Coloque as informações sobre o evento!"),e.preventDefault()):$.trim(r)==""?(m("Coloque as informações do ginásio!"),e.preventDefault()):$.trim(c)==""&&(m("Coloque as informações gerais do campeonato!"),e.preventDefault())});
